<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* queryURLParams:地址栏中问号传参的信息 */
        // let url = "https://www.baidu.com/s?wd=unicode&rsv_spt=1#video"; // urlencoded
        function queryURLParams(url) {
            /* let askIndex = url.indexOf("?"),
                polIndex = url.indexOf("#"),
                askText = "",
                polText = "";
            polIndex === -1 ? polIndex = url.length : null;
            askIndex > -1 ? askText = url.slice(askIndex + 1, polIndex) : null;
            polText = url.slice(polIndex + 1);
            let obj = {};
            polText.length > 0 ? obj["HASH"] = polText : null;
            if (askText) {
                let arr = askText.split("&");
                arr.forEach(item => {
                    let arr1 = item.split("=");
                    obj[arr1[0]] = arr1[1];
                })
            }
            return obj; */

            // 创建a标签
            /* let link = document.createElement("a");
            link.href = url;
            let askText = link.search.substr(1),
                polText = link.hash.substr(1);
            let obj = {};
            polText ? obj["HASH"] = polText : null;
            if (askText) {
                let arr = askText.split(/(?:=|&)/g);
                for (let i = 0; i < arr.length; i+=2) {
                    obj[arr[i]] = arr[i + 1];
                }
                console.log(arr);
            }
            return obj; */

            // 正则
            let obj = {};
            url.replace(/([^?=#&]+)=([^?=#&]+)/g, (_, key, value) => obj[key] = value);
            url.replace(/#([^?=#&]+)/g, (_, hash) => obj["HASH"] = hash);
            return obj;
        }
        let result = queryURLParams("https://www.baidu.com/s?wd=unicode&rsv_spt=1#video");
        console.log(result);
    </script>
</body>

</html>